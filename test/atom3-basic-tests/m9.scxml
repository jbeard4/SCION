<ns0:scxml xmlns:ns0="http://www.w3.org/2005/07/scxml" profile="ecmascript" version="1.0" name="root">
  <ns0:parallel id="active">
    <ns0:state id="O1">
      <ns0:initial>
        <ns0:transition target="AB"/>
      </ns0:initial>
      <ns0:state id="AB">
        <ns0:initial>
          <ns0:transition target="A"/>
        </ns0:initial>
        <ns0:state id="A">
          <ns0:onentry>
            <ns0:log expr="&quot;entering state A&quot;"/>
          </ns0:onentry>
          <ns0:onexit>
            <ns0:log expr="&quot;exiting state A&quot;"/>
          </ns0:onexit>
          <ns0:transition target="B" event="e1">
            <ns0:log expr="&quot;triggered by e1&quot;"/>
          </ns0:transition>
        </ns0:state>
        <ns0:state id="B">
          <ns0:transition target="A" event="e2">
            <ns0:log expr="&quot;triggered by e2&quot;"/>
          </ns0:transition>
        </ns0:state>
        <ns0:history type="shallow" id="$history_0"/>
        <ns0:transition target="C" event="e3"/>
      </ns0:state>
      <ns0:state id="C">
        <ns0:onentry>
          <ns0:log expr="&quot;entering state C&quot;"/>
        </ns0:onentry>
        <ns0:onexit>
          <ns0:log expr="&quot;exiting state C&quot;"/>
        </ns0:onexit>
        <ns0:transition target="AB" event="back"/>
        <ns0:transition target="$history_0" event="hist"/>
      </ns0:state>
    </ns0:state>
    <ns0:state id="O2">
      <ns0:initial>
        <ns0:transition target="X"/>
      </ns0:initial>
      <ns0:state id="X">
        <ns0:transition target="Y" event="trig1"/>
      </ns0:state>
      <ns0:state id="Y">
        <ns0:transition target="X" cond="In('t1')"/>
      </ns0:state>
    </ns0:state>
    <ns0:state id="O3">
      <ns0:initial>
        <ns0:transition target="t1"/>
      </ns0:initial>
      <ns0:state id="t1">
        <ns0:transition target="t2" event="$timeout_0"/>
        <ns0:onentry>
          <ns0:send delay="0.5s" event="$timeout_0" id="$send_0"/>
        </ns0:onentry>
        <ns0:onexit>
          <ns0:cancel sendid="$send_0"/>
        </ns0:onexit>
      </ns0:state>
      <ns0:state id="t2">
        <ns0:transition target="t1" event="$timeout_1">
          <ns0:send event="trig1"/>
        </ns0:transition>
        <ns0:onentry>
          <ns0:send delay="3s" event="$timeout_1" id="$send_1"/>
        </ns0:onentry>
        <ns0:onexit>
          <ns0:cancel sendid="$send_1"/>
        </ns0:onexit>
      </ns0:state>
    </ns0:state>
    <ns0:transition target="inactive" event="deactivate"/>
    <ns0:transition event="toFinal" target="finalState"/>
  </ns0:parallel>
  <ns0:initial>
    <ns0:transition target="active"/>
  </ns0:initial>
  <ns0:state id="inactive">
    <ns0:transition target="active" event="activate"/>
  </ns0:state>
  <ns0:final id="finalState"/>
</ns0:scxml>
